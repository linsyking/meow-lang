enc(x) {
    "$" = "\$";
    "\" = "\\";
    x
}

dec(x) {
    "\\" = "\";
    "\$" = "$";
    x
}

catc(x,y) {
    rep2("\$","\",x,"$",y)
}

rep2(s,x1,y1,x2,y2) {
    var s1 = {
        "\$$" = enc(y1);
        "\$$$" = enc(y2);
        "\$$$$" = enc(x2) + "$";
        enc(x2) = "\$$$";
        enc(x1) = "\$$";
        enc(s)
    };
    dec(s1)
}
